aW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVJlZHVjZXIsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JwppbXBvcnQgeyBQcm9qZWN0U2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL3Byb2plY3RTZXJ2aWNlJwppbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnLi9BdXRoQ29udGV4dCcKCi8vIO2UhOuhnOygne2KuCDtg4DsnoUg7KCV7J2YICjsi6TsoJwgU3VwYWJhc2Ug7Iqk7YKk66eI7JeQIOunnuy2sCDsiJjsoJUpCmludGVyZmFjZSBQcm9qZWN0IHsKICBpZDogc3RyaW5nCiAgbmFtZTogc3RyaW5nCiAgZGVzY3JpcHRpb24/OiBzdHJpbmcgfCBudWxsCiAgc3RhdHVzOiBzdHJpbmcKICBvd25lcl9pZDogc3RyaW5nCiAgY3JlYXRlZF9hdDogc3RyaW5nIHwgbnVsbAogIHVwZGF0ZWRfYXQ6IHN0cmluZyB8IG51bGwKICBba2V5OiBzdHJpbmddOiBhbnkgLy8g7LaU6rCAIO2VhOuTnOuTpOydhCDsnITtlZwg7J24642x7IqkIOyLnOq3uOuLiOyymAp9CgppbnRlcmZhY2UgUHJvamVjdEluc2VydCB7CiAgbmFtZTogc3RyaW5nCiAgZGVzY3JpcHRpb24/OiBzdHJpbmcKICBzdGF0dXM/OiBzdHJpbmcKICBvd25lcl9pZDogc3RyaW5nCn0KCmludGVyZmFjZSBQcm9qZWN0VXBkYXRlIHsKICBuYW1lPzogc3RyaW5nCiAgZGVzY3JpcHRpb24/OiBzdHJpbmcKICBzdGF0dXM/OiBzdHJpbmcKICB1cGRhdGVkX2F0Pzogc3RyaW5nCn0KCi8vIO2UhOuhnOygne2KuCDsg4Htg5wg7YOA7J6FIOygleydmAppbnRlcmZhY2UgUHJvamVjdFN0YXRlIHsKICBjdXJyZW50UHJvamVjdDogUHJvamVjdCB8IG51bGwKICB1c2VyUHJvamVjdHM6IFByb2plY3RbXQogIHJlY2VudFByb2plY3RzOiBQcm9qZWN0W10KICBsb2FkaW5nOiBib29sZWFuCiAgZXJyb3I6IHN0cmluZyB8IG51bGwKfQoKLy8g7JWh7IWYIO2DgOyehSDsoJXsnZgKdHlwZSBQcm9qZWN0QWN0aW9uID0KICB8IHsgdHlwZTogJ1NFVF9MT0FESU5HJzsgcGF5bG9hZDogYm9vbGVhbiB9CiAgfCB7IHR5cGU6ICdTRVRfRVJST1InOyBwYXlsb2FkOiBzdHJpbmcgfCBudWxsIH0KICB8IHsgdHlwZTogJ1NFVF9DVVJSRU5UX1BST0pFQ1QnOyBwYXlsb2FkOiBQcm9qZWN0IHwgbnVsbCB9CiAgfCB7IHR5cGU6ICdTRVRfVVNFUl9QUk9KRUNUUyc7IHBheWxvYWQ6IFByb2plY3RbXSB9CiAgfCB7IHR5cGU6ICdTRVRfUkVDRU5UX1BST0pFQ1RTJzsgcGF5bG9hZDogUHJvamVjdFtdIH0KICB8IHsgdHlwZTogJ0FERF9QUk9KRUNUJzsgcGF5bG9hZDogUHJvamVjdCB9CiAgfCB7IHR5cGU6ICdVUERBVEVfUFJPSkVDVCc7IHBheWxvYWQ6IFByb2plY3QgfQogIHwgeyB0eXBlOiAnUkVNT1ZFX1BST0pFQ1QnOyBwYXlsb2FkOiBzdHJpbmcgfQogIHwgeyB0eXBlOiAnQ0xFQVJfUFJPSkVDVFMnIH0KCi8vIOy0iOq4sCDsg4Htg5wKY29uc3QgaW5pdGlhbFN0YXRlOiBQcm9qZWN0U3RhdGUgPSB7CiAgY3VycmVudFByb2plY3Q6IG51bGwsCiAgdXNlclByb2plY3RzOiBbXSwKICByZWNlbnRQcm9qZWN0czogW10sCiAgbG9hZGluZzogZmFsc2UsCiAgZXJyb3I6IG51bGwKfQoKLy8g66as65OA7IScCmZ1bmN0aW9uIHByb2plY3RSZWR1Y2VyKHN0YXRlOiBQcm9qZWN0U3RhdGUsIGFjdGlvbjogUHJvamVjdEFjdGlvbik6IFByb2plY3RTdGF0ZSB7CiAgc3dpdGNoIChhY3Rpb24udHlwZSkgewogICAgY2FzZSAnU0VUX0xPQURJTkcnOgogICAgICByZXR1cm4geyAuLi5zdGF0ZSwgbG9hZGluZzogYWN0aW9uLnBheWxvYWQgfQogICAgY2FzZSAnU0VUX0VSUk9SJzoKICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGVycm9yOiBhY3Rpb24ucGF5bG9hZCwgbG9hZGluZzogZmFsc2UgfQogICAgY2FzZSAnU0VUX0NVUlJFTlRfUFJPSkVDVCc6CiAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBjdXJyZW50UHJvamVjdDogYWN0aW9uLnBheWxvYWQgfQogICAgY2FzZSAnU0VUX1VTRVJfUFJPSkVDVFMnOgogICAgICByZXR1cm4geyAuLi5zdGF0ZSwgdXNlclByb2plY3RzOiBhY3Rpb24ucGF5bG9hZCwgbG9hZGluZzogZmFsc2UgfQogICAgY2FzZSAnU0VUX1JFQ0VOVF9QUk9KRUNUUyc6CiAgICAgIHJldHVybiB7IC4uLnN0YXRlLCByZWNlbnRQcm9qZWN0czogYWN0aW9uLnBheWxvYWQgfQogICAgY2FzZSAnQUREX1BST0pFQ1QnOgogICAgICByZXR1cm4gewogICAgICAgIC4uLnN0YXRlLAogICAgICAgIHVzZXJQcm9qZWN0czogW2FjdGlvbi5wYXlsb2FkLCAuLi5zdGF0ZS51c2VyUHJvamVjdHNdLAogICAgICAgIHJlY2VudFByb2plY3RzOiBbYWN0aW9uLnBheWxvYWQsIC4uLnN0YXRlLnJlY2VudFByb2plY3RzLnNsaWNlKDAsIDQpXQogICAgICB9CiAgICBjYXNlICdVUERBVEVfUFJPSkVDVCc6CiAgICAgIHJldHVybiB7CiAgICAgICAgLi4uc3RhdGUsCiAgICAgICAgdXNlclByb2plY3RzOiBzdGF0ZS51c2VyUHJvamVjdHMubWFwKHAgPT4KICAgICAgICAgIHAuaWQgPT09IGFjdGlvbi5wYXlsb2FkLmlkID8gYWN0aW9uLnBheWxvYWQgOiBwCiAgICAgICAgKSwKICAgICAgICByZWNlbnRQcm9qZWN0czogc3RhdGUucmVjZW50UHJvamVjdHMubWFwKHAgPT4KICAgICAgICAgIHAuaWQgPT09IGFjdGlvbi5wYXlsb2FkLmlkID8gYWN0aW9uLnBheWxvYWQgOiBwCiAgICAgICAgKSwKICAgICAgICBjdXJyZW50UHJvamVjdDogc3RhdGUuY3VycmVudFByb2plY3Q/LmlkID09PSBhY3Rpb24ucGF5bG9hZC5pZAogICAgICAgICAgPyBhY3Rpb24ucGF5bG9hZAogICAgICAgICAgOiBzdGF0ZS5jdXJyZW50UHJvamVjdAogICAgICB9CiAgICBjYXNlICdSRU1PVkVfUFJPSkVDVCc6CiAgICAgIHJldHVybiB7CiAgICAgICAgLi4uc3RhdGUsCiAgICAgICAgdXNlclByb2plY3RzOiBzdGF0ZS51c2VyUHJvamVjdHMuZmlsdGVyKHAgPT4gcC5pZCAhPT0gYWN0aW9uLnBheWxvYWQpLAogICAgICAgIHJlY2VudFByb2plY3RzOiBzdGF0ZS5yZWNlbnRQcm9qZWN0cy5maWx0ZXIocCA9PiBwLmlkICE9PSBhY3Rpb24ucGF5bG9hZCksCiAgICAgICAgY3VycmVudFByb2plY3Q6IHN0YXRlLmN1cnJlbnRQcm9qZWN0Py5pZCA9PT0gYWN0aW9uLnBheWxvYWQKICAgICAgICAgID8gbnVsbAogICAgICAgICAgOiBzdGF0ZS5jdXJyZW50UHJvamVjdAogICAgICB9CiAgICBjYXNlICdDTEVBUl9QUk9KRUNUUyc6CiAgICAgIHJldHVybiB7CiAgICAgICAgLi4uc3RhdGUsCiAgICAgICAgY3VycmVudFByb2plY3Q6IG51bGwsCiAgICAgICAgdXNlclByb2plY3RzOiBbXSwKICAgICAgICByZWNlbnRQcm9qZWN0czogW10sCiAgICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgICAgZXJyb3I6IG51bGwKICAgICAgfQogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIHN0YXRlCiAgfQp9CgovLyDsu6jthY3siqTtirgg7YOA7J6FIOygleydmAppbnRlcmZhY2UgUHJvamVjdENvbnRleHRUeXBlIHsKICBzdGF0ZTogUHJvamVjdFN0YXRlCiAgc2VsZWN0UHJvamVjdDogKHByb2plY3Q6IFByb2plY3QpID0+IHZvaWQKICBsb2FkVXNlclByb2plY3RzOiAob3B0aW9ucz86IHsgc2lsZW50PzogYm9vbGVhbiB9KSA9PiBQcm9taXNlPHZvaWQ+CiAgbG9hZFJlY2VudFByb2plY3RzOiAoKSA9PiBQcm9taXNlPHZvaWQ+CiAgY3JlYXRlUHJvamVjdDogKHByb2plY3REYXRhOiBQcm9qZWN0SW5zZXJ0KSA9PiBQcm9taXNlPFByb2plY3Q+CiAgdXBkYXRlUHJvamVjdDogKHByb2plY3RJZDogc3RyaW5nLCB1cGRhdGVzOiBQcm9qZWN0VXBkYXRlKSA9PiBQcm9taXNlPFByb2plY3Q+CiAgZGVsZXRlUHJvamVjdDogKHByb2plY3RJZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+CiAgZ2V0Q3VycmVudFByb2plY3Q6ICgpID0+IFByb2plY3QgfCBudWxsCiAgY2xlYXJQcm9qZWN0czogKCkgPT4gdm9pZApleHBvcnQgZnVuY3Rpb24gUHJvamVjdFByb3ZpZGVyKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbiA6IFJlYWN0LlJlYWN0Tm9kZSB9KSB7CiAgY29uc3QgW3N0YXRlLCBkaXNwYXRjaF0gPSB1c2VSZWR1Y2VyKHByb2plY3RSZWR1Y2VyLCBpbml0aWFsU3RhdGUpCiAgY29uc3QgeyB1c2VyLCBpc0F1dGhlbnRpY2F0ZWQgfSA9IHVzZUF1dGgoKQogIGNvbnN0IGxhc3RMb2FkZWRVc2VySWRSZWYgPSB1c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbCkKICBjb25zdCBzdGF0ZVJlZiA9IHVzZVJlZihzdGF0ZSkKICBjb25zdCB1c2VySWQgPSB1c2VyPy5pZCA/PyBudWxsCgogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBzdGF0ZVJlZi5current = state
ICB9LCBbc3RhdGVdKQogIC4u.
